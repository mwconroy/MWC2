---                                                                     
  - name: Confirgure VM With Docker                                                       
    hosts: webservers                                                                           
    become: true                                                                             
    tasks:    

  - name: Uninstall Apache2 on Webservers                 
    apt:           
    name: apache2                                                                      
    state: absent                                                                              
                  
  - name: Install docker.io On Webservers                                                              
    apt:                                                    
      update_cache: yes                                                                             
      name: docker.io                                                                                   
      state: present                                                                         
                         
  - name: Install Pip3 On Webservers                                                        
    apt:                                                                     
    name: python3-pip                                                                        
    state: present                                                                                
                 
  - name: Install Python Docker Module                                                            
    pip:                                                                                       
      name: docker                                                                 
      state: present                                                                           
                    
  - name: Download and Launch DVWA                                                               
    docker_container:                                                                           
      name: dvwa                                                             
      image: cyberxsecurity/dvwa                                                   
      state: started                                                                
      restart_policy: always                                                             
      published_ports: 80:80
